
dio@ROMANPC:/mnt/c/Users/rlyst/Netology/devops/ansible$ ansible-playbook -i inventories/hosts.yml install-nginx-proxy.yml
[WARNING]: Ansible is being run in a world writable directory (/mnt/c/Users/rlyst/Netology/devops/ansible), ignoring it as an ansible.cfg source. For more information see https://docs.ansible.com/ansible/devel/reference_app
endices/config.html#cfg-in-world-writable-dir
[WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

PLAY [Setup Nginx Reverse Proxy on k8s-master] ********************************************************************************************************************************************************************************

TASK [Gathering Facts] ********************************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [1. Update apt cache and install nginx] **********************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [2. Remove old k8s configs] **********************************************************************************************************************************************************************************************
ok: [k8s-server-1] => (item=/etc/nginx/sites-available/k8s*)
ok: [k8s-server-1] => (item=/etc/nginx/sites-enabled/k8s*)
changed: [k8s-server-1] => (item=/etc/nginx/sites-enabled/default)

TASK [3. Create nginx proxy config] *******************************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [4. Enable proxy site] ***************************************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [5. Test nginx config] ***************************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [6. Fail if nginx config test failed] ************************************************************************************************************************************************************************************
skipping: [k8s-server-1]

TASK [7. Restart nginx] *******************************************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [8. Wait for nginx to be ready] ******************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [9. Get ansible_host from inventory] *************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [10. Show nginx status] **************************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [11. Display success info] ***********************************************************************************************************************************************************************************************
ok: [k8s-server-1] => {
    "msg": [
        "Nginx Proxy installed on k8s-server-1!",
        "Public IP: 89.169.140.156",
        "Access: http://89.169.140.156/",
        "Nginx Status: active",
        "Logs: tail -f /var/log/nginx/access.log"
    ]
}

RUNNING HANDLER [restart nginx] ***********************************************************************************************************************************************************************************************
changed: [k8s-server-1]

PLAY RECAP ********************************************************************************************************************************************************************************************************************
k8s-server-1               : ok=12   changed=6    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0
