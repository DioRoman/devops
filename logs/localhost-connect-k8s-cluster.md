
dio@ROMANPC:/mnt/c/Users/rlyst/Netology/devops/ansible$ ansible-playbook -i inventories/hosts.yml localhost-connect-k8s-cluster.yml --ask-become-pass
[WARNING]: Ansible is being run in a world writable directory (/mnt/c/Users/rlyst/Netology/devops/ansible), ignoring it as an ansible.cfg source. For more information see https://docs.ansible.com/ansible/devel/reference_app
endices/config.html#cfg-in-world-writable-dir
BECOME password:
[WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

PLAY [Подключение к Kubernetes кластеру (с /etc/hosts)] ***********************************************************************************************************************************************************************

TASK [Gathering Facts] ********************************************************************************************************************************************************************************************************
ok: [localhost]

TASK [Создать директорию .kube] ***********************************************************************************************************************************************************************************************
ok: [localhost]

TASK [Получить существующие записи k8s-master в hosts] ************************************************************************************************************************************************************************
ok: [localhost]

TASK [Скопировать kubeconfig с мастера] ***************************************************************************************************************************************************************************************
changed: [localhost]

TASK [Проверить kubeconfig] ***************************************************************************************************************************************************************************************************
ok: [localhost]

TASK [Очистить старые k8s-master записи] **************************************************************************************************************************************************************************************
changed: [localhost]

TASK [Добавить новую запись k8s-master] ***************************************************************************************************************************************************************************************
changed: [localhost]

TASK [Проверить запись в hosts] ***********************************************************************************************************************************************************************************************
ok: [localhost]

TASK [Проверить кластер (nodes -o wide)] **************************************************************************************************************************************************************************************
ok: [localhost]

TASK [Показать результаты] ****************************************************************************************************************************************************************************************************
ok: [localhost] => {
    "msg": [
        " ПОДКЛЮЧЕНИЕ ЗАВЕРШЕНО!",
        " Kubeconfig: /home/dio/.kube/config ",
        " /etc/hosts: 89.169.140.156 k8s-master ",
        "НОДЫ КЛАСТЕРА (kubectl get nodes -o wide):",
        [
            "NAME         STATUS   ROLES           AGE   VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME",
            "k8s-master   Ready    control-plane   17m   v1.34.3   10.0.1.10     <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://2.2.1",
            "k8s-node-a   Ready    <none>          12m   v1.34.3   10.0.1.15     <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://2.2.1",
            "k8s-node-b   Ready    <none>          12m   v1.34.3   10.0.2.15     <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://2.2.1",
            "k8s-node-d   Ready    <none>          12m   v1.34.3   10.0.3.15     <none>        Ubuntu 24.04.3 LTS   6.8.0-90-generic   containerd://2.2.1"
        ]
    ]
}

TASK [Сохранить инструкции] ***************************************************************************************************************************************************************************************************
changed: [localhost]

TASK [Добавить алиасы в bashrc] ***********************************************************************************************************************************************************************************************
changed: [localhost]

PLAY RECAP ********************************************************************************************************************************************************************************************************************
localhost                  : ok=12   changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
