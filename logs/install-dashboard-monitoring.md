
dio@ROMANPC:/mnt/c/Users/rlyst/Netology/devops/ansible$ ansible-playbook -i inventories/hosts.yml install-dashboard-monitoring.yml
[WARNING]: Ansible is being run in a world writable directory (/mnt/c/Users/rlyst/Netology/devops/ansible), ignoring it as an ansible.cfg source. For more information see https://docs.ansible.com/ansible/devel/reference_app
endices/config.html#cfg-in-world-writable-dir
[WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

PLAY [Установка Kubernetes Dashboard и Monitoring Stack (Исправлено)] *********************************************************************************************************************************************************

TASK [Gathering Facts] ********************************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Установить Python зависимости для системного интерпретатора] ************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Проверить наличие Helm] *************************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Установить Helm если отсутствует] ***************************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [Добавить и обновить Helm репозитории] ***********************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Установить Kubernetes Dashboard с правильными настройками] **************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [Обновить NodePort сервис Kong-proxy с правильным селектором] ************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [Создать ServiceAccount для Dashboard] ***********************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [Создать ClusterRoleBinding для admin прав] ******************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [Создать namespace monitoring] *******************************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [Установить kube-prometheus-stack с Grafana NodePort] ********************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [Фиксировать Grafana NodePort] *******************************************************************************************************************************************************************************************
changed: [k8s-server-1]

TASK [Определить публичный IP мастера] ****************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Проверить статус Dashboard (с endpoints)] *******************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Проверить статус Monitoring] ********************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Получить токен Dashboard admin] *****************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Получить публичный IP мастера] ******************************************************************************************************************************************************************************************
ok: [k8s-server-1]

TASK [Показать информацию о развертывании] ************************************************************************************************************************************************************************************
ok: [k8s-server-1] => {
    "msg": [
        "  РАЗВЁРТЫВАНИЕ ЗАВЕРШЕНО УСПЕШНО!",
        "  GRAFANA (доступна извне):",
        "  URL: http://89.169.140.156:30001",
        "  Логин:",
        "  Пароль: ",
        "  KUBERNETES DASHBOARD (доступен извне):",
        "  URL: https://89.169.140.156:30443 (игнорируйте предупреждение о сертификате)",
        "  ТОКЕН (скопируйте ЦЕЛИКОМ одной строкой):",
        "  ",
        "  Namespace monitoring: monitoring",
        "  Проверить статус:",
        "  kubectl get pods -n monitoring",
        "  kubectl get svc -n monitoring prometheus-grafana"
    ]
}

TASK [Сохранить информацию развертывания] *************************************************************************************************************************************************************************************
changed: [k8s-server-1]

PLAY RECAP ********************************************************************************************************************************************************************************************************************
k8s-server-1               : ok=19   changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
